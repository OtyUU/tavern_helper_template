{"version":3,"file":"index.js","mappings":"oHAAA,MAAM,EAA+BA,ECAxBC,EAAS,EAAAD,EAAEE,OAAO,CAC3BC,MAAO,EAAAH,EACFE,OAAO,CACRE,aAAc,EAAAJ,EACTK,SACAC,SAAS,4BACTC,SAAS,KAAM,IAAIC,MACnBC,eAAe,QAAS,CACzBC,KAAM,UACNC,MAAO,UACPC,IAAK,UACLC,KAAM,UACNC,OAAQ,YAEPC,QAAQ,MAAO,MACpBC,iBAAkB,EAAAhB,EAAEK,SAASE,SAAS,WACtCU,QAAS,EAAAjB,EAAEK,SAASE,SAAS,SAC7BW,cAAe,EAAAlB,EAAEmB,OAAO,EAAAnB,EAAEK,SAASC,SAAS,cAAe,EAAAN,EAAEK,SAASC,SAAS,sBAAsBC,SAAS,CAAC,KAE9GA,SAAS,CAAC,GACfa,OAAQ,EAAApB,EACHE,OAAO,CACRmB,UAAW,EAAArB,EAAEsB,OACRC,SACAC,UAAUC,GAAKC,EAAEC,MAAMF,EAAG,EAAG,MAC7BlB,SAAS,IACdqB,KAAM,EAAA5B,EAAE6B,KAAK,CAAC,QAAS,UAAW,QAAS,SAAU,UAAW,UAAW,WAAWtB,SAAS,WAC/FuB,aAAc,EAAA9B,EAAEsB,OACXC,SACAC,UAAUC,GAAKC,EAAEC,MAAMF,EAAG,EAAG,MAC7BlB,SAAS,IACdwB,OAAQ,EAAA/B,EACHgC,cAAc,EAAAhC,EAAE6B,KAAK,CAAC,MAAO,SAAU,YAAa,cAAe,YAAa,EAAA7B,EAAEK,SAASC,SAAS,yBACpGC,SAAS,CAAC,GACf0B,iBAAkB,EAAAjC,EAAEK,SAASE,SAAS,WACtC2B,gBAAiB,EAAAlC,EACZmB,OAAO,EAAAnB,EAAEK,SAASC,SAAS,yBAA0B,EAAAN,EAAEE,OAAO,CAC/DiC,YAAa,EAAAnC,EAAEK,SACf+B,eAAgB,EAAApC,EAAEsB,OAAOC,SAASC,UAAUC,GAAKC,EAAEC,MAAMF,EAAG,EAAG,QAE9DlB,SAAS,CAAC,KAEdA,SAAS,CAAC,GACViB,UAAUa,IACX,MAAMC,EAAmBD,EAAKhB,UAAY,GACpC,UACAgB,EAAKhB,UAAY,GACb,aACAgB,EAAKhB,UAAY,GACb,WACAgB,EAAKhB,UAAY,GACb,gBACA,UAClB,MAAO,IAAKgB,EAAMC,sBAEtBC,KAAM,EAAAvC,EACDE,OAAO,CACRsC,UAAW,EAAAxC,EACNmB,OAAO,EAAAnB,EAAEK,SAASC,SAAS,aAAc,EAAAN,EAAEE,OAAO,CACnDiC,YAAa,EAAAnC,EAAEK,SACfoC,SAAU,EAAAzC,EAAEsB,OAAOC,YAElBC,UAAUa,GAAQX,EAAEgB,OAAOL,EAAM,EAAGI,cAAeA,EAAW,IAC9DlC,SAAS,CAAC,GACfoC,sBAAuB,EAAA3C,EAClBmB,OAAO,EAAAnB,EAAEK,SAASC,SAAS,aAAc,EAAAN,EAAEK,SAASC,SAAS,kBAC7DC,SAAS,CAAC,GACfqC,mBAAoB,EAAA5C,EAAEK,SAASE,SAAS,MAEvCA,SAAS,CAAC,KClEnBsC,EAAE,KACA,EAAkB5C","sources":["src://tavern_helper_template/external var \"z\"","src://tavern_helper_template/src/kinako_character_card/schema.ts","src://tavern_helper_template/src/kinako_character_card/scripts/variable_structure/index.ts"],"sourcesContent":["const __WEBPACK_NAMESPACE_OBJECT__ = z;","export const Schema = z.object({\n    world: z\n        .object({\n        current_time: z\n            .string()\n            .describe('Format: YYYY-MM-DD HH:MM')\n            .prefault(() => new Date()\n            .toLocaleString('zh-CN', {\n            year: 'numeric',\n            month: '2-digit',\n            day: '2-digit',\n            hour: '2-digit',\n            minute: '2-digit',\n        })\n            .replace(/\\//g, '-')),\n        current_location: z.string().prefault('Unknown'),\n        weather: z.string().prefault('Sunny'),\n        recent_events: z.record(z.string().describe('Event name'), z.string().describe('Event description')).prefault({}),\n    })\n        .prefault({}),\n    kinako: z\n        .object({\n        affection: z.coerce\n            .number()\n            .transform(v => _.clamp(v, 0, 100))\n            .prefault(50),\n        mood: z.enum(['happy', 'playful', 'pouty', 'sleepy', 'curious', 'tantrum', 'clingy']).prefault('playful'),\n        energy_level: z.coerce\n            .number()\n            .transform(v => _.clamp(v, 0, 100))\n            .prefault(80),\n        outfit: z\n            .partialRecord(z.enum(['top', 'bottom', 'underwear', 'accessories', 'costume']), z.string().describe('Clothing description'))\n            .prefault({}),\n        current_activity: z.string().prefault('Playing'),\n        favorite_things: z\n            .record(z.string().describe('Item or activity name'), z.object({\n            description: z.string(),\n            interest_level: z.coerce.number().transform(v => _.clamp(v, 0, 10)),\n        }))\n            .prefault({}),\n    })\n        .prefault({})\n        .transform(data => {\n        const $affection_stage = data.affection < 20\n            ? 'distant'\n            : data.affection < 40\n                ? 'warming_up'\n                : data.affection < 60\n                    ? 'attached'\n                    : data.affection < 80\n                        ? 'deeply_bonded'\n                        : 'devoted';\n        return { ...data, $affection_stage };\n    }),\n    sato: z\n        .object({\n        inventory: z\n            .record(z.string().describe('Item name'), z.object({\n            description: z.string(),\n            quantity: z.coerce.number(),\n        }))\n            .transform(data => _.pickBy(data, ({ quantity }) => quantity > 0))\n            .prefault({}),\n        kinako_gifts_received: z\n            .record(z.string().describe('Gift name'), z.string().describe('When received'))\n            .prefault({}),\n        relationship_notes: z.string().prefault(''),\n    })\n        .prefault({}),\n});\n","import { registerMvuSchema } from 'https://testingcf.jsdelivr.net/gh/StageDog/tavern_resource/dist/util/mvu_zod.js';\nimport { Schema } from '../../schema';\n\n$(() => {\n  registerMvuSchema(Schema);\n});\n"],"names":["z","Schema","object","world","current_time","string","describe","prefault","Date","toLocaleString","year","month","day","hour","minute","replace","current_location","weather","recent_events","record","kinako","affection","coerce","number","transform","v","_","clamp","mood","enum","energy_level","outfit","partialRecord","current_activity","favorite_things","description","interest_level","data","$affection_stage","sato","inventory","quantity","pickBy","kinako_gifts_received","relationship_notes","$"],"ignoreList":[],"sourceRoot":""}