const n=z,t='tavern-helper-external-html-sidebar',e=n.z.object({mode:n.z.enum(['url','paste']).default('url'),url:n.z.string().min(1).default('about:blank'),pasteContent:n.z.string().default('')});let r=!1;function o(){try{const n=getVariables({type:'script'});return e.parse(n)}catch(n){return e.parse({})}}function a(n){replaceVariables(n,{type:'script'})}function i(){const n=`\n    #${t} {\n      position: fixed;\n      top: 0;\n      right: 0;\n      width: 500px;\n      height: 100vh;\n      background: rgba(29, 33, 40, 0.95);\n      backdrop-filter: blur(5px);\n      border-left: 0.5px solid rgba(0, 0, 0, 0.5);\n      border-top-left-radius: 12px;\n      border-bottom-left-radius: 12px;\n      z-index: 999999;\n      transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n      transform: translateX(100%);\n      display: flex;\n      flex-direction: column;\n      color: rgba(207, 207, 197, 1);\n      box-shadow: -2px 0 10px rgba(0, 0, 0, 0.5);\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;\n    }\n\n    #${t}.visible {\n      transform: translateX(0);\n    }\n\n    #${t} .header {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      padding: 0 20px;\n      height: 50px;\n      background: rgba(29, 33, 40, 0.98);\n      border-bottom: 0.5px solid rgba(0, 0, 0, 0.8);\n      border-top-left-radius: 12px;\n      flex-shrink: 0;\n    }\n\n    #${t} .header h3 {\n      margin: 0;\n      font-size: 16px;\n      font-weight: 500;\n    }\n\n    #${t} .close-btn {\n      background: rgba(29, 33, 40, 0.6);\n      border: 0.5px solid rgba(0, 0, 0, 0.8);\n      color: rgba(207, 207, 197, 0.9);\n      cursor: pointer;\n      padding: 5px 12px;\n      border-radius: 8px;\n      font-size: 20px;\n      transition: all 0.2s ease;\n      line-height: 1;\n    }\n\n    #${t} .close-btn:hover {\n      background: rgba(40, 45, 52, 0.8);\n      color: #fff;\n    }\n\n    #${t} .content {\n      flex: 1;\n      overflow: hidden;\n      position: relative;\n    }\n\n    #${t} iframe {\n      width: 100%;\n      height: 100%;\n      border: none;\n      background: transparent;\n    }\n\n    #${t} .footer {\n      padding: 10px 15px;\n      background: rgba(29, 33, 40, 0.98);\n      border-top: 0.5px solid rgba(0, 0, 0, 0.8);\n      display: flex;\n      gap: 8px;\n      flex-shrink: 0;\n    }\n\n    #${t} .url-input {\n      flex: 1;\n      background: rgba(0, 0, 0, 0.3);\n      border: 0.5px solid rgba(255, 255, 255, 0.1);\n      border-radius: 6px;\n      color: #fff;\n      padding: 6px 10px;\n      font-size: 12px;\n      outline: none;\n    }\n\n    #${t} .load-btn {\n      background: #4a5568;\n      border: none;\n      border-radius: 6px;\n      color: #fff;\n      padding: 6px 12px;\n      font-size: 12px;\n      cursor: pointer;\n      transition: background 0.2s;\n    }\n\n    #${t} .load-btn:hover {\n      background: #2d3748;\n    }\n\n    #${t} .mode-toggle {\n      display: flex;\n      background: rgba(0, 0, 0, 0.3);\n      border-radius: 6px;\n      padding: 2px;\n      margin-bottom: 8px;\n    }\n\n    #${t} .mode-option {\n      flex: 1;\n      background: transparent;\n      border: none;\n      color: #aaa;\n      padding: 6px 12px;\n      border-radius: 4px;\n      font-size: 12px;\n      cursor: pointer;\n      transition: all 0.2s;\n    }\n\n    #${t} .mode-option.active {\n      background: #4a5568;\n      color: #fff;\n    }\n\n    #${t} .mode-content {\n      display: flex;\n      flex-direction: column;\n      gap: 8px;\n      flex: 1;\n    }\n\n    #${t} .paste-container {\n      display: none;\n      flex-direction: column;\n      gap: 8px;\n    }\n\n    #${t} .paste-container.active {\n      display: flex;\n    }\n\n    #${t} .url-container {\n      display: none;\n      gap: 8px;\n    }\n\n    #${t} .url-container.active {\n      display: flex;\n    }\n\n    #${t} .paste-textarea {\n      flex: 1;\n      background: rgba(0, 0, 0, 0.3);\n      border: 0.5px solid rgba(255, 255, 255, 0.1);\n      border-radius: 6px;\n      color: #fff;\n      padding: 8px;\n      font-size: 12px;\n      font-family: 'Courier New', monospace;\n      resize: vertical;\n      min-height: 60px;\n      outline: none;\n    }\n\n    #${t} .paste-textarea:focus {\n      border-color: #4a5568;\n    }\n\n    #${t} .render-btn {\n      background: #4a5568;\n      border: none;\n      border-radius: 6px;\n      color: #fff;\n      padding: 6px 12px;\n      font-size: 12px;\n      cursor: pointer;\n      transition: background 0.2s;\n    }\n\n    #${t} .render-btn:hover {\n      background: #2d3748;\n    }\n  `;$('<style>').text(n).appendTo('head'),function(){if($(`head > div[script_id="${getScriptId()}"]`).length>0)return;const n=$('<div>').attr('script_id',getScriptId()).append($('head > style',document).clone());$('head').append(n)}()}function s(){if($(`#${t}`).length>0)return;const n=o(),e=n.mode||'url',r=`\n    <div id="${t}">\n      <div class="header">\n        <div style="display: flex; align-items: center; gap: 8px;">\n          <span style="font-size: 18px;">üåê</span>\n          <h3>External Interface</h3>\n        </div>\n        <button class="close-btn" id="${t}-close" title="Close">√ó</button>\n      </div>\n      <div class="content">\n        <iframe id="${t}-iframe" src="${n.url}"></iframe>\n      </div>\n      <div class="footer">\n        <div class="mode-toggle">\n          <button class="mode-option ${'url'===e?'active':''}" data-mode="url">URL</button>\n          <button class="mode-option ${'paste'===e?'active':''}" data-mode="paste">Paste Code</button>\n        </div>\n        <div class="mode-content">\n          <div class="url-container ${'url'===e?'active':''}">\n            <input type="text" class="url-input" id="${t}-url-input" value="${'about:blank'===n.url?'':n.url}" placeholder="Enter HTML URL (e.g. ./panel/index.html)...">\n            <button class="load-btn" id="${t}-load-btn">Load</button>\n          </div>\n          <div class="paste-container ${'paste'===e?'active':''}">\n            <textarea class="paste-textarea" id="${t}-paste-textarea" placeholder="Paste your HTML/CSS/JS code here...">${n.pasteContent}</textarea>\n            <button class="render-btn" id="${t}-render-btn">Render</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  `;$('body').append(r),$(`#${t}-close`).on('click',()=>p(!1)),$('.mode-option').on('click',function(){!function(n){const t=o();a({...t,mode:n}),$('.mode-option').removeClass('active'),$(`.mode-option[data-mode="${n}"]`).addClass('active'),$('.url-container').toggleClass('active','url'===n),$('.paste-container').toggleClass('active','paste'===n),toastr.info(`Switched to ${n} mode`)}($(this).data('mode'))}),$(`#${t}-load-btn`).on('click',()=>{const n=$(`#${t}-url-input`).val().trim();n&&d(n)}),$(`#${t}-url-input`).on('keypress',n=>{if(13===n.which){const n=$(`#${t}-url-input`).val().trim();n&&d(n)}}),$(`#${t}-render-btn`).on('click',()=>{const n=$(`#${t}-paste-textarea`).val();n.trim()&&l(n)}),$(`#${t}-paste-textarea`).on('input',()=>{const n=$(`#${t}-paste-textarea`).val();a({...o(),pasteContent:n})}),'paste'===e&&n.pasteContent&&l(n.pasteContent)}function d(n){try{n.startsWith('http://')||n.startsWith('https://')||n.startsWith('./')||n.startsWith('/')||'about:blank'===n||n.includes('.')&&!n.includes(' ')&&(n='https://'+n),e.parse({url:n}),$(`#${t}-iframe`).attr('src',n),a({url:n}),toastr.success('URL updated and loaded')}catch(n){toastr.error('Invalid URL format')}}function l(n){try{const e=(new DOMParser).parseFromString(n,'text/html');let r=e.body.innerHTML;r.trim()||(r=e.documentElement.outerHTML);const i=Array.from(e.querySelectorAll('style')).map(n=>n.textContent).join('\n'),s=`<!DOCTYPE html>\n<html>\n<head>\n  <meta charset="UTF-8">\n  <style>${i}</style>\n</head>\n<body>\n  ${r}\n  <script>${Array.from(e.querySelectorAll('script')).map(n=>n.textContent).join('\n')}<\/script>\n</body>\n</html>`,d=new Blob([s],{type:'text/html'}),l=URL.createObjectURL(d);$(`#${t}-iframe`).attr('src',l);a({...o(),pasteContent:n}),toastr.success('Code rendered successfully')}catch(n){console.error('Failed to render pasted code:',n),toastr.error('Failed to render code: '+(n instanceof Error?n.message:String(n)))}}function p(n){r='boolean'==typeof n?n:!r,$(`#${t}`).toggleClass('visible',r)}$(()=>{i(),s();const n='üåê External Interface';if('function'==typeof replaceScriptButtons&&replaceScriptButtons([{name:n,visible:!0}]),'function'==typeof getButtonEvent){const t=getButtonEvent(n);eventOn(t,()=>p())}$(document).on('keydown',n=>{'Escape'===n.key&&r&&p(!1)})}),$(window).on('pagehide',()=>{$(`#${t}`).remove(),$(`head > div[script_id="${getScriptId()}"]`).remove()});
//# sourceMappingURL=index.js.map