const n=z,t='tavern-helper-external-html-sidebar',e=n.z.object({url:n.z.string().url().or(n.z.literal('about:blank')).default('about:blank')});let r=!1;function o(){const n=`\n    #${t} {\n      position: fixed;\n      top: 0;\n      right: 0;\n      width: 500px;\n      height: 100vh;\n      background: rgba(29, 33, 40, 0.95);\n      backdrop-filter: blur(5px);\n      border-left: 0.5px solid rgba(0, 0, 0, 0.5);\n      border-top-left-radius: 12px;\n      border-bottom-left-radius: 12px;\n      z-index: 999999;\n      transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n      transform: translateX(100%);\n      display: flex;\n      flex-direction: column;\n      color: rgba(207, 207, 197, 1);\n      box-shadow: -2px 0 10px rgba(0, 0, 0, 0.5);\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;\n    }\n\n    #${t}.visible {\n      transform: translateX(0);\n    }\n\n    #${t} .header {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      padding: 0 20px;\n      height: 50px;\n      background: rgba(29, 33, 40, 0.98);\n      border-bottom: 0.5px solid rgba(0, 0, 0, 0.8);\n      border-top-left-radius: 12px;\n      flex-shrink: 0;\n    }\n\n    #${t} .header h3 {\n      margin: 0;\n      font-size: 16px;\n      font-weight: 500;\n    }\n\n    #${t} .close-btn {\n      background: rgba(29, 33, 40, 0.6);\n      border: 0.5px solid rgba(0, 0, 0, 0.8);\n      color: rgba(207, 207, 197, 0.9);\n      cursor: pointer;\n      padding: 5px 12px;\n      border-radius: 8px;\n      font-size: 20px;\n      transition: all 0.2s ease;\n      line-height: 1;\n    }\n\n    #${t} .close-btn:hover {\n      background: rgba(40, 45, 52, 0.8);\n      color: #fff;\n    }\n\n    #${t} .content {\n      flex: 1;\n      overflow: hidden;\n      position: relative;\n    }\n\n    #${t} iframe {\n      width: 100%;\n      height: 100%;\n      border: none;\n      background: transparent;\n    }\n\n    #${t} .footer {\n      padding: 10px 15px;\n      background: rgba(29, 33, 40, 0.98);\n      border-top: 0.5px solid rgba(0, 0, 0, 0.8);\n      display: flex;\n      gap: 8px;\n      flex-shrink: 0;\n    }\n\n    #${t} .url-input {\n      flex: 1;\n      background: rgba(0, 0, 0, 0.3);\n      border: 0.5px solid rgba(255, 255, 255, 0.1);\n      border-radius: 6px;\n      color: #fff;\n      padding: 6px 10px;\n      font-size: 12px;\n      outline: none;\n    }\n\n    #${t} .load-btn {\n      background: #4a5568;\n      border: none;\n      border-radius: 6px;\n      color: #fff;\n      padding: 6px 12px;\n      font-size: 12px;\n      cursor: pointer;\n      transition: background 0.2s;\n    }\n\n    #${t} .load-btn:hover {\n      background: #2d3748;\n    }\n  `;$('<style>').text(n).appendTo('head'),function(){if($(`head > div[script_id="${getScriptId()}"]`).length>0)return;const n=$('<div>').attr('script_id',getScriptId()).append($('head > style',document).clone());$('head').append(n)}()}function a(){if($(`#${t}`).length>0)return;const n=function(){try{const n=getVariables({type:'script'});return e.parse(n)}catch(n){return e.parse({})}}(),r=`\n    <div id="${t}">\n      <div class="header">\n        <div style="display: flex; align-items: center; gap: 8px;">\n          <span style="font-size: 18px;">üåê</span>\n          <h3>External Interface</h3>\n        </div>\n        <button class="close-btn" id="${t}-close" title="Close">√ó</button>\n      </div>\n      <div class="content">\n        <iframe id="${t}-iframe" src="${n.url}"></iframe>\n      </div>\n      <div class="footer">\n        <input type="text" class="url-input" id="${t}-url-input" value="${'about:blank'===n.url?'':n.url}" placeholder="Enter HTML URL...">\n        <button class="load-btn" id="${t}-load-btn">Load</button>\n      </div>\n    </div>\n  `;$('body').append(r),$(`#${t}-close`).on('click',()=>s(!1)),$(`#${t}-load-btn`).on('click',()=>{const n=$(`#${t}-url-input`).val().trim();n&&i(n)}),$(`#${t}-url-input`).on('keypress',n=>{if(13===n.which){const n=$(`#${t}-url-input`).val().trim();n&&i(n)}})}function i(n){try{n.startsWith('http://')||n.startsWith('https://')||'about:blank'===n||(n='https://'+n),e.parse({url:n}),$(`#${t}-iframe`).attr('src',n),replaceVariables({url:n},{type:'script'}),toastr.success('URL updated and loaded')}catch(n){toastr.error('Invalid URL format')}}function s(n){r='boolean'==typeof n?n:!r,$(`#${t}`).toggleClass('visible',r)}$(()=>{o(),a();const n='üåê External Interface';if('function'==typeof replaceScriptButtons&&replaceScriptButtons([{name:n,visible:!0}]),'function'==typeof getButtonEvent){const t=getButtonEvent(n);eventOn(t,()=>s())}$(document).on('keydown',n=>{'Escape'===n.key&&r&&s(!1)})}),$(window).on('pagehide',()=>{$(`#${t}`).remove(),$(`head > div[script_id="${getScriptId()}"]`).remove()});
//# sourceMappingURL=index.js.map