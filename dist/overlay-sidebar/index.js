function e(e,n){if('undefined'==typeof $)return console.warn('[Sidebar] jQuery not available for selector:',e),null;try{const o=n?$(e,n):$(e);return 0===o.length?(window.sidebarDebug&&console.debug(`[Sidebar] Selector didn't match any elements: ${e}`),null):o}catch(n){return console.error('[Sidebar] Selector error:',e,n),null}}const n={on(e,n,o,r){if('undefined'!=typeof $)try{const t=$(e);if(0===t.length)return void console.warn('[Sidebar] Event target not found:',e);r?t.on(n,r,o):t.on(n,o),window.sidebarDebug&&console.debug(`[Sidebar] Event bound: ${n} on`,e)}catch(e){console.error('[Sidebar] Event binding error:',n,e)}else console.warn('[Sidebar] jQuery not available for event binding:',n)},off(e,n,o){if('undefined'!=typeof $)try{const r=$(e);if(0===r.length)return;n&&o?r.off(n,o):n?r.off(n):r.off(),window.sidebarDebug&&console.debug(`[Sidebar] Event unbound: ${n||'all'} on`,e)}catch(e){console.error('[Sidebar] Event unbinding error:',n,e)}},once(e,n,o){if('undefined'!=typeof $)try{const r=$(e);if(0===r.length)return void console.warn('[Sidebar] Event target not found:',e);r.one(n,o),window.sidebarDebug&&console.debug(`[Sidebar] One-time event bound: ${n} on`,e)}catch(e){console.error('[Sidebar] Event binding error:',n,e)}else console.warn('[Sidebar] jQuery not available for event binding:',n)}};function o(e){const n={},o=[];for(const r of e){let e=!1;switch(r){case'jQuery':e='undefined'!=typeof $;break;case'localStorage':e='undefined'!=typeof localStorage;break;case'replaceScriptButtons':e='function'==typeof window.replaceScriptButtons;break;case'eventOn':e='function'==typeof window.eventOn;break;case'getButtonEvent':e='function'==typeof window.getButtonEvent}n[r]=e,e||o.push(r)}return o.length>0?(console.warn('[Sidebar] Missing dependencies:',o.join(', ')),window.sidebarDebug&&(console.groupCollapsed('[Sidebar] Dependency check details'),console.table(n),console.groupEnd())):window.sidebarDebug&&console.debug('[Sidebar] All dependencies available'),n}function r(e,n){if('function'==typeof window.replaceScriptButtons)try{return window.replaceScriptButtons(e),console.log('[Sidebar] Script buttons replaced:',e.map(e=>e.name).join(', ')),!0}catch(e){return console.error('[Sidebar] replaceScriptButtons error:',e),n&&(console.log('[Sidebar] Executing fallback action'),n()),!1}return console.warn('[Sidebar] replaceScriptButtons not available'),n&&(console.log('[Sidebar] Executing fallback action'),n()),!1}function t(e,n,o){if('function'==typeof window.eventOn)try{return window.eventOn(e,n),console.log('[Sidebar] Event handler registered:',e),!0}catch(e){return console.error('[Sidebar] eventOn error:',e),o&&(console.log('[Sidebar] Executing fallback action'),o()),!1}return console.warn('[Sidebar] eventOn not available'),o&&(console.log('[Sidebar] Executing fallback action'),o()),!1}function a(e,n){if('function'==typeof window.getButtonEvent)try{const n=window.getButtonEvent(e);return console.log('[Sidebar] Button event retrieved:',e,'->',n),n}catch(e){return console.error('[Sidebar] getButtonEvent error:',e),n||null}return console.warn('[Sidebar] getButtonEvent not available'),n||null}function l(e='tavern_helper_quick_notes'){let n='global';if(window.SillyTavern&&'function'==typeof window.SillyTavern.getCurrentChatId)try{const e=window.SillyTavern.getCurrentChatId();null!=e&&(n=`chat_${e}`)}catch(e){console.warn('[Sidebar] Failed to get chat ID:',e)}return`${e}_${n}_${sessionStorage.getItem('tavern_helper_session')||'default'}`}function i(){return l()}function s(){return l('tavern_helper_occ_notes')}function c(e){try{const n=i();localStorage.setItem(n,e),console.log(`[Tavern Helper] Notes saved for ${n}, length: ${e.length}`),'function'==typeof window.syncNotesToVariable&&window.syncNotesToVariable(e),console.log('[Tavern Helper] Variable sync attempted')}catch(e){console.error('[Tavern Helper] Failed to save notes:',e)}}function d(e){try{const n=s();localStorage.setItem(n,e),console.log(`[Tavern Helper] OCC notes saved for ${n}, length: ${e.length}`),'function'==typeof window.syncOCCToVariable&&window.syncOCCToVariable(e),console.log('[Tavern Helper] OCC Notes: OCC notes saved successfully!'),console.log('[Tavern Helper] OCC variable sync completed')}catch(e){console.error('[Tavern Helper] Failed to save OCC notes:',e),console.error('[Tavern Helper] OCC Notes: Failed to save OCC notes')}}function u(){try{const e=i(),n=localStorage.getItem(e)||'';return console.log(`[Tavern Helper] Notes loaded for ${e}, length: ${n.length}`),n}catch(e){return console.error('[Tavern Helper] Failed to load notes:',e),''}}function b(){try{const e=s(),n=localStorage.getItem(e)||'';return console.log(`[Tavern Helper] OCC notes loaded for ${e}, length: ${n.length}`),n}catch(e){return console.error('[Tavern Helper] Failed to load OCC notes:',e),''}}const p={enabled:!0,delay:1e3};let g=null,v=null,f={...p};function w(){$(document).on('input','#tavern-helper-notes',function(){if(!f.enabled)return;const e=$(this).val();'function'==typeof window.syncNotesToVariable&&window.syncNotesToVariable(e),console.log(`[Tavern Helper] Immediate variable sync (${e.length} chars)`),g&&clearTimeout(g),g=window.setTimeout(()=>{c(e),console.log(`[Tavern Helper] Auto-saved notes to localStorage (${e.length} chars)`)},f.delay)}),$(document).on('input','#tavern-helper-occ',function(){if(!f.enabled)return;const e=$(this).val();'function'==typeof window.syncOCCToVariable&&window.syncOCCToVariable(e),console.log(`[Tavern Helper] Immediate OCC variable sync (${e.length} chars)`),v&&clearTimeout(v),v=window.setTimeout(()=>{d(e),console.log(`[Tavern Helper] Auto-saved OCC notes to localStorage (${e.length} chars)`)},f.delay)})}function h(){g&&(clearTimeout(g),g=null);const n=e('#tavern-helper-notes');c(n?n.val():'')}window.saveCurrentNotes=function(){console.log('[Tavern Helper] Manual save triggered');const e=$('#tavern-helper-notes').val();console.log(`[Tavern Helper] Saving content length: ${e.length}`),c(e),console.log('[Tavern Helper] Quick Notes: Notes saved successfully!')},window.saveCurrentOCC=function(){console.log('[Tavern Helper] Manual OCC save triggered');const e=$('#tavern-helper-occ').val();console.log(`[Tavern Helper] Saving OCC content length: ${e.length}`),d(e)},window.loadNotes=function(){return u()};const y='tavern-helper-overlay-sidebar';let S=!1;function T(){$('<style>').text('\n        .tavern-helper-overlay-sidebar {\n            position: fixed;\n            top: 0;\n            right: 0;\n            width: 500px;\n            height: 100vh;\n            background: rgba(29, 33, 40, 0.9);\n            backdrop-filter: blur(0px);\n            border-left: 0.5px solid rgba(0, 0, 0, 0.5);\n            border-top-left-radius: 12px;\n            border-bottom-left-radius: 12px;\n            z-index: 999999;\n            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n            transform: translateX(100%);\n            padding: 0;\n            color: rgba(207, 207, 197, 1);\n            overflow: hidden;\n            box-shadow: -1px 0 0 rgba(0, 0, 0, 0.5);\n            font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', \'Roboto\', sans-serif;\n            display: flex;\n            flex-direction: column;\n        }\n\n        .tavern-helper-overlay-sidebar.visible {\n            transform: translateX(0);\n        }\n\n        .tavern-helper-overlay-sidebar .header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            padding: 0 20px;\n            height: 40px;\n            background: rgba(29, 33, 40, 0.95);\n            border-bottom: 0.5px solid rgba(0, 0, 0, 0.8);\n            border-top-left-radius: 12px;\n            backdrop-filter: blur(0px);\n            flex-shrink: 0;\n        }\n\n        .tavern-helper-overlay-sidebar .header-title {\n            display: flex;\n            align-items: center;\n            gap: 10px;\n        }\n\n        .tavern-helper-overlay-sidebar .header-icon {\n            width: 20px;\n            height: 20px;\n            opacity: 0.7;\n            color: rgba(207, 207, 197, 0.8);\n        }\n\n        .tavern-helper-overlay-sidebar .header h3 {\n            margin: 0;\n            font-size: 15px;\n            font-weight: 500;\n            letter-spacing: 0.3px;\n            color: rgba(207, 207, 197, 1);\n        }\n\n        .tavern-helper-overlay-sidebar .close-btn {\n            background: rgba(29, 33, 40, 0.6);\n            border: 0.5px solid rgba(0, 0, 0, 0.8);\n            color: rgba(207, 207, 197, 0.9);\n            cursor: pointer;\n            padding: 6px 10px;\n            border-radius: 8px;\n            font-size: 18px;\n            line-height: 1;\n            transition: all 0.2s ease;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            min-width: 32px;\n            height: 32px;\n        }\n\n        .tavern-helper-overlay-sidebar .close-btn:hover {\n            background: rgba(40, 45, 52, 0.8);\n            border-color: rgba(0, 0, 0, 0.9);\n            color: rgba(237, 234, 234, 1);\n        }\n\n        .tavern-helper-overlay-sidebar .close-btn:active {\n            transform: scale(0.95);\n        }\n\n        .tavern-helper-overlay-sidebar .content {\n            display: flex;\n            flex-direction: column;\n            flex: 1;\n            padding: 20px;\n            overflow: hidden;\n            gap: 10px;\n        }\n\n        .tavern-helper-overlay-sidebar textarea {\n            width: 100%;\n            background: rgba(29, 33, 40, 0.88);\n            border: 0.5px solid rgba(0, 0, 0, 0.8);\n            color: rgba(207, 207, 197, 1);\n            padding: 14px;\n            border-radius: 10px;\n            font-family: \'SF Mono\', \'Monaco\', \'Consolas\', monospace;\n            resize: none;\n            font-size: 13.5px;\n            line-height: 1.6;\n            transition: all 0.2s ease;\n        }\n\n        .tavern-helper-overlay-sidebar textarea#tavern-helper-notes {\n            flex: 1; /* ~70% */\n            min-height: 180px;\n        }\n\n        .tavern-helper-overlay-sidebar textarea#tavern-helper-occ {\n            flex: 0.15; /* ~30% */\n            min-height: 60px;\n        }\n\n        .tavern-helper-overlay-sidebar textarea:focus {\n            outline: none;\n            border-color: rgb(92, 94, 100);\n            background: rgba(29, 33, 40, 0.95);\n            box-shadow: none;\n        }\n\n        .tavern-helper-overlay-sidebar textarea::placeholder {\n            color: rgba(145, 145, 145, 1);\n            font-style: italic;\n        }\n\n        .tavern-helper-overlay-sidebar textarea::-webkit-scrollbar {\n            width: 8px;\n        }\n\n        .tavern-helper-overlay-sidebar textarea::-webkit-scrollbar-track {\n            background: rgba(0, 0, 0, 0.3);\n            border-radius: 4px;\n        }\n\n        .tavern-helper-overlay-sidebar textarea::-webkit-scrollbar-thumb {\n            background: rgba(60, 65, 72, 0.8);\n            border-radius: 4px;\n            transition: background 0.2s ease;\n        }\n\n        .tavern-helper-overlay-sidebar textarea::-webkit-scrollbar-thumb:hover {\n            background: rgba(80, 85, 92, 1);\n        }\n    ').appendTo('head'),function(){if($(`head > div[script_id="${getScriptId()}"]`).length>0)return;const e=$('<div>').attr('script_id',getScriptId()).append($('head > style',document).clone());$('head').append(e)}()}function C(){const n=window.sidebarDebug;console.groupCollapsed(`[Tavern Helper] toggleSidebar called, current visibility: ${S}`),console.info('Action:',S?'Hiding':'Showing'),n&&console.debug('Full state:',{sidebarVisible:S,SIDEBAR_ID:y}),S=!S;const o=e(`#${y}`);if(o?.toggleClass('visible',S),console.log(`[Tavern Helper] Sidebar visibility set to: ${S}`),S){if(setTimeout(()=>{const n=e('#tavern-helper-notes');n?.length?(n.trigger('focus'),console.info('[Tavern Helper] Textarea focused')):console.warn('[Tavern Helper] Textarea not found for focus')},100),'function'==typeof window.loadNotes){const o=window.loadNotes(),r=e('#tavern-helper-notes');r?.val(o),console.log(`[Tavern Helper] Notes loaded, length: ${o.length}`),n&&o.length>0&&console.debug('First 100 chars:',o.substring(0,100)+'...')}else console.error('[Tavern Helper] window.loadNotes not defined');if('function'==typeof window.loadOCCNotes){const n=window.loadOCCNotes(),o=e('#tavern-helper-occ');o?.val(n),console.log(`[Tavern Helper] OCC notes loaded, length: ${n.length}`)}}else if('function'==typeof window.saveCurrentNotes?(console.log('[Tavern Helper] Auto-saving before hiding'),window.saveCurrentNotes()):console.warn('[Tavern Helper] window.saveCurrentNotes not defined, skipping auto-save'),'function'==typeof window.saveCurrentOCC)window.saveCurrentOCC();else if('function'==typeof window.saveOCCNotes){const e=$('#tavern-helper-occ').val();window.saveOCCNotes(e)}console.groupEnd()}function m(){S||C()}function x(){S&&C()}function H(){const o=window.sidebarDebug;console.groupCollapsed('[Tavern Helper] Initializing sidebar...'),console.info('Start time:',(new Date).toISOString()),console.debug('Debug flag:',o),T(),console.log('[Tavern Helper] CSS injected'),function(){if(e(`#${y}`)?.length)return;$(`\n        <div id="${y}" class="tavern-helper-overlay-sidebar">\n            <div class="header">\n                <div class="header-title">\n                    <svg class="header-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>\n        <polyline points="14 2 14 8 20 8"></polyline>\n        <line x1="16" y1="13" x2="8" y2="13"></line>\n        <line x1="16" y1="17" x2="8" y2="17"></line>\n        <polyline points="10 9 9 9 8 9"></polyline>\n    </svg>\n                    <h3>Quick Notes</h3>\n                </div>\n                <button class="close-btn" onclick="window.hideSidebar()" title="Close (Esc)">Ã—</button>\n            </div>\n            <div class="content">\n                <textarea id="tavern-helper-notes" placeholder="Take your quick notes here...\n\nSaved automatically when you close the sidebar." spellcheck="true"></textarea>\n                <textarea id="tavern-helper-occ" placeholder="Out of character (OCC)" spellcheck="true"></textarea>\n            </div>\n        </div>\n    `).appendTo('body')}(),console.log('[Tavern Helper] HTML injected'),n.on(`#${y} .close-btn`,'click',x),n.on('#tavern-helper-notes','blur',function(){const e=window.sidebarDebug;e&&console.debug('[Tavern Helper] Textarea blur detected');try{'function'==typeof window.saveCurrentNotes&&(window.saveCurrentNotes(),e&&console.info('[Tavern Helper] Auto-saved on blur'))}catch(e){console.warn('[Tavern Helper] Blur save error:',e)}'function'==typeof window.triggerAutoSave&&window.triggerAutoSave()}),n.on('#tavern-helper-occ','blur',function(){window.sidebarDebug&&console.debug('[Tavern Helper] OCC textarea blur detected');try{if('function'==typeof window.saveCurrentOCC)window.saveCurrentOCC();else{const e=$(this).val();window.saveOCCNotes?.(e)}}catch(e){console.warn('[Tavern Helper] OCC blur save error:',e)}}),n.on(document,'keydown',function(e){'Escape'===e.key&&S&&(console.log('[Tavern Helper] Escape key pressed, closing sidebar'),x())}),console.log('[Tavern Helper] Event listeners set up'),window.toggleSidebar=C,window.hideSidebar=x,window.showSidebar=m,window.testSidebarButton=k,window.enableSidebarDebug=O,console.info('[Tavern Helper] Debug functions exposed',o?'(debug mode active)':'(global)'),console.log('[Tavern Helper] Global functions exposed'),console.groupEnd(),o&&function(){const e=$('<div>').css({position:'fixed',bottom:'10px',right:'10px',width:'20px',height:'20px',borderRadius:'50%',background:'#ff5555',border:'2px solid #ffb86c',zIndex:'1000000',opacity:'0.7',pointerEvents:'none'}).attr('title','Sidebar Debug Mode Active').appendTo('body');$('<style>').text('\n        @keyframes debugPulse {\n            0% { opacity: 0.3; transform: scale(1); }\n            50% { opacity: 0.9; transform: scale(1.1); }\n            100% { opacity: 0.3; transform: scale(1); }\n        }\n        #tavern-helper-debug-indicator {\n            animation: debugPulse 2s infinite;\n        }\n    ').appendTo('head'),e.attr('id','tavern-helper-debug-indicator'),console.debug('[Tavern Helper] Visual debug indicator added')}()}function k(){console.group('[Tavern Helper] Debug Test: Autosave Functionality'),console.info('Testing autosave functionality at',(new Date).toISOString()),console.log('Save button removed - testing autosave functionality instead');const n='undefined'!=typeof localStorage;console.log('localStorage available:',n);const o='function'==typeof window.saveCurrentNotes;console.log('saveCurrentNotes function available:',o);const r=null!==e('#tavern-helper-notes');console.log('Textarea exists:',r);const t=n&&o&&r;return console.log('Overall test result:',t?'PASS':'FAIL'),console.groupEnd(),t}function O(e=!0){window.sidebarDebug=!0,console.warn('[Tavern Helper] Debug mode enabled',e?'(verbose)':''),e&&console.log('[Tavern Helper] Current environment:',{sidebarVisible:S,sidebarId:y,jQueryLoaded:'undefined'!=typeof $,textareaExists:$('#tavern-helper-notes').length>0,debugFlag:window.sidebarDebug})}function N(){$(`#${y}`).remove(),$('style:contains(".tavern-helper-overlay-sidebar")').remove(),$(`head > div[script_id="${getScriptId()}"]`).remove(),delete window.toggleSidebar,delete window.hideSidebar,delete window.showSidebar,delete window.testSidebarButton,delete window.enableSidebarDebug}const D='overlaySidebar_quickNotes',E='overlaySidebar_OCC';function A(e){try{'function'==typeof insertOrAssignVariables?(insertOrAssignVariables({[D]:e},{type:'script'}),insertOrAssignVariables({[D]:e},{type:'chat'}),console.log(`[Tavern Helper] Updated tavern variable ${D} with ${e.length} chars`)):M(e)}catch(n){console.error('[Tavern Helper] Failed to update tavern variable:',n),M(e)}}function V(e){try{'function'==typeof insertOrAssignVariables?(insertOrAssignVariables({[E]:e},{type:'script'}),insertOrAssignVariables({[E]:e},{type:'chat'}),console.log(`[Tavern Helper] Updated tavern variable ${E} with ${e.length} chars`)):q(e)}catch(n){console.error('[Tavern Helper] Failed to update OCC tavern variable:',n),q(e)}}function I(){try{if('function'!=typeof getVariables)return function(){try{return localStorage.getItem('overlaySidebar_quickNotes_fallback')||''}catch{return''}}();{const e=getVariables({type:'script'});if(e&&'string'==typeof e[D])return e[D];const n=getVariables({type:'chat'});if(n&&'string'==typeof n[D])return n[D]}}catch(e){}return''}function B(){try{if('function'!=typeof getVariables)return function(){try{return localStorage.getItem('overlaySidebar_OCC_fallback')||''}catch{return''}}();{const e=getVariables({type:'script'});if(e&&'string'==typeof e[E])return e[E];const n=getVariables({type:'chat'});if(n&&'string'==typeof n[E])return n[E]}}catch(e){}return''}function F(){if(A(u()),window.tavern_helper?.registerVariable)try{window.tavern_helper.registerVariable(D,{get:()=>{const e=u();return e||I()},set:n=>{if('string'==typeof n){c(n),A(n);const o=e('#tavern-helper-notes');o&&o.val(n)}},description:'Quick notes from the overlay sidebar'}),console.log(`[Tavern Helper] Registered custom tavern variable: ${D}`)}catch(e){console.error('[Tavern Helper] Failed to register custom variable:',e)}console.log(`[Tavern Helper] Tavern variable ${D} is now available for macros`)}function j(){if(V(b()),window.tavern_helper?.registerVariable)try{window.tavern_helper.registerVariable(E,{get:()=>{const e=b();return e||B()},set:n=>{if('string'==typeof n){d(n),V(n);const o=e('#tavern-helper-occ');o&&o.val(n)}},description:'Out-of-character notes from the overlay sidebar'}),console.log(`[Tavern Helper] Registered custom tavern variable: ${E}`)}catch(e){console.error('[Tavern Helper] Failed to register OCC custom variable:',e)}console.log(`[Tavern Helper] Tavern variable ${E} is now available for macros`)}function Q(e){A(e)}function M(e){try{localStorage.setItem('overlaySidebar_quickNotes_fallback',e),console.debug('[Tavern Helper] Fallback variable sync:',e.length,'chars')}catch(e){console.warn('[Tavern Helper] Fallback sync failed:',e)}}function q(e){try{localStorage.setItem('overlaySidebar_OCC_fallback',e),console.debug('[Tavern Helper] Fallback OCC variable sync:',e.length,'chars')}catch(e){console.warn('[Tavern Helper] Fallback OCC sync failed:',e)}}if($(()=>{console.log('[Tavern Helper] Overlay Sidebar script loading...'),o(['jQuery','localStorage','replaceScriptButtons','eventOn','getButtonEvent']),H(),w(),$(window).on('beforeunload',()=>{h()}),$(document).on('sidebar:hidden',()=>{h()}),F(),r([{name:'ðŸ“ Quick Notes',visible:!0}],()=>{console.warn('[Tavern Helper] Using fallback button placement');const e=$('<button>').text('ðŸ“ Quick Notes').addClass('script-button');e.on('click',()=>{window.toggleSidebar?.()}),$('#scriptButtons').append(e)});const e=a('ðŸ“ Quick Notes','scriptButton:click:quick_notes');e?t(e,()=>{'function'==typeof window.toggleSidebar?window.toggleSidebar():console.warn('[Tavern Helper] toggleSidebar not available')},()=>{console.warn('[Tavern Helper] Using fallback button click handler'),$('button:contains("ðŸ“ Quick Notes")').on('click',()=>{window.toggleSidebar?.()})}):console.warn('[Tavern Helper] Could not get button event name'),window.syncNotesToVariable=Q,console.log('[Tavern Helper] Overlay Sidebar script loaded successfully')}),$(window).on('pagehide',()=>{console.log('[Tavern Helper] Overlay Sidebar script unloading...'),h(),N(),g&&(clearTimeout(g),g=null),v&&(clearTimeout(v),v=null),console.log('[Tavern Helper] Overlay Sidebar script unloaded')}),void 0!==window.tavern_events){const e=window.tavern_events;'function'==typeof window.eventOn&&e.CHAT_CHANGED&&window.eventOn(e.CHAT_CHANGED,()=>{console.log('[Tavern Helper] Chat changed, sidebar cleanup')})}console.info('[Tavern Helper] Sidebar script loading at',(new Date).toISOString()),console.debug('[Tavern Helper] Environment info:',{userAgent:navigator.userAgent,location:window.location.href,jQuery:'undefined'!=typeof $?$.fn?.jquery||'unknown':'not loaded',jQueryVersion:'undefined'!=typeof jQuery?jQuery.fn?.jquery||'unknown':'not loaded',consoleAvailable:'undefined'!=typeof console,localStorageAvailable:'undefined'!=typeof localStorage,sidebarDebug:window.sidebarDebug||'not set',scriptVersion:'2.0-revised'}),window.sidebarDebug=window.sidebarDebug||!1,'undefined'==typeof $&&console.warn('[Tavern Helper] jQuery ($) not found - sidebar may not work correctly'),'undefined'==typeof localStorage&&console.error('[Tavern Helper] localStorage unavailable - notes cannot be saved'),console.log('[Tavern Helper] Sidebar module loaded successfully'),'loading'===document.readyState?document.addEventListener('DOMContentLoaded',()=>{console.log('[Tavern Helper] DOM ready, initializing sidebar'),H(),F(),j(),w(),console.log('[Tavern Helper] Full initialization completed')}):(console.log('[Tavern Helper] DOM already ready, initializing immediately'),H(),F(),j(),w(),console.log('[Tavern Helper] Full initialization completed')),window.testSidebarAvailability=function(){console.group('[Tavern Helper] Global Function Availability Test');const e={};let n=!0;return['toggleSidebar','hideSidebar','showSidebar','testSidebarButton','enableSidebarDebug','saveCurrentNotes','loadNotes'].forEach(o=>{const r='function'==typeof window[o];e[o]=r?'âœ… Available':'âŒ Missing',r||(n=!1),console.log(`${o}: ${e[o]}`)}),console.log('Overall: '+(n?'âœ… All functions available':'âŒ Some functions missing')),console.log('Window object check:',Object.keys(e)),console.groupEnd(),n},window.sidebarDebug&&setTimeout(()=>{console.log('[Tavern Helper] Auto-running availability test...'),window.testSidebarAvailability()},1e3);
//# sourceMappingURL=index.js.map