{"version":3,"file":"index.js","mappings":"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","sources":["src://tavern_helper_template/node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/exportHelper.js","src://tavern_helper_template/webpack/bootstrap","src://tavern_helper_template/external var \"Vue\"","src://tavern_helper_template/external var \"z\"","src://tavern_helper_template/src/Kinako/schema.ts","src://tavern_helper_template/src/Kinako/界面/store.ts","webpack://tavern_helper_template/./src/Kinako/界面/状态栏/App.vue?db5d","webpack://tavern_helper_template/src/Kinako/界面/状态栏/App.vue?ef3d","src://tavern_helper_template/src/Kinako/界面/状态栏/index.ts"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const __WEBPACK_NAMESPACE_OBJECT__ = Vue;","const __WEBPACK_NAMESPACE_OBJECT__ = z;","export const Schema = z.object({\n    好感度: z.coerce.number().transform(value => _.clamp(value, 0, 100)),\n    情绪: z.enum(['开心', '生气', '悲伤', '兴奋', '无聊']).default('开心'),\n    能量: z.coerce.number().transform(value => _.clamp(value, 0, 100)),\n    信任度: z.coerce.number().transform(value => _.clamp(value, 0, 100)),\n    依赖度: z.coerce.number().transform(value => _.clamp(value, 0, 100)),\n    物品栏: z\n        .record(z.string().describe('物品名'), z.object({\n        描述: z.string(),\n        数量: z.coerce.number().transform(value => _.clamp(value, 0, 100)),\n    }))\n        .prefault({}),\n    称号: z.array(z.string()).prefault([]),\n    状态: z\n        .object({\n        饥饿: z.coerce.number().transform(value => _.clamp(value, 0, 100)),\n        疲劳: z.coerce.number().transform(value => _.clamp(value, 0, 100)),\n        快乐: z.coerce.number().transform(value => _.clamp(value, 0, 100)),\n    })\n        .prefault({}),\n    记忆: z\n        .array(z.object({\n        事件: z.string(),\n        时间: z.coerce.number().transform(value => _.clamp(value, 0, Number.MAX_SAFE_INTEGER)),\n    }))\n        .prefault([]),\n});\n","import { Schema } from '../schema';\nexport const useDataStore = defineStore('data', errorCatched(() => {\n    const message_id = getCurrentMessageId();\n    const data = ref(Schema.parse(_.get(getVariables({ type: 'message', message_id }), 'stat_data', {})));\n    watchDebounced(data, new_data => {\n        const parsed = Schema.parse(new_data);\n        if (!_.isEqual(parsed, new_data)) {\n            data.value = parsed;\n        }\n        updateVariablesWith(variables => {\n            _.set(variables, 'stat_data', parsed);\n            return variables;\n        }, { type: 'message', message_id });\n    }, { deep: true, debounce: 500 });\n    return { data };\n}));\n","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, unref as _unref, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = { class: \"kinako-status-bar\" };\nconst _hoisted_2 = { class: \"status-item\" };\nconst _hoisted_3 = { class: \"value\" };\nconst _hoisted_4 = { class: \"status-item\" };\nconst _hoisted_5 = { class: \"value\" };\nconst _hoisted_6 = { class: \"status-item\" };\nconst _hoisted_7 = { class: \"value\" };\nconst _hoisted_8 = { class: \"status-item\" };\nconst _hoisted_9 = { class: \"value\" };\nconst _hoisted_10 = { class: \"status-item\" };\nconst _hoisted_11 = { class: \"value\" };\nconst _hoisted_12 = { class: \"status-item\" };\nconst _hoisted_13 = { class: \"value\" };\nconst _hoisted_14 = { class: \"status-item\" };\nconst _hoisted_15 = { class: \"value\" };\nconst _hoisted_16 = { class: \"status-item\" };\nconst _hoisted_17 = { class: \"value\" };\nimport { useDataStore } from '../store';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'App',\n    setup(__props) {\n        const { data } = useDataStore();\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _cache[0] || (_cache[0] = _createElementVNode(\"span\", { class: \"label\" }, \"好感度:\", -1 /* CACHED */)),\n                    _createElementVNode(\"span\", _hoisted_3, _toDisplayString(_unref(data).好感度), 1 /* TEXT */)\n                ]),\n                _createElementVNode(\"div\", _hoisted_4, [\n                    _cache[1] || (_cache[1] = _createElementVNode(\"span\", { class: \"label\" }, \"情绪:\", -1 /* CACHED */)),\n                    _createElementVNode(\"span\", _hoisted_5, _toDisplayString(_unref(data).情绪), 1 /* TEXT */)\n                ]),\n                _createElementVNode(\"div\", _hoisted_6, [\n                    _cache[2] || (_cache[2] = _createElementVNode(\"span\", { class: \"label\" }, \"能量:\", -1 /* CACHED */)),\n                    _createElementVNode(\"span\", _hoisted_7, _toDisplayString(_unref(data).能量), 1 /* TEXT */)\n                ]),\n                _createElementVNode(\"div\", _hoisted_8, [\n                    _cache[3] || (_cache[3] = _createElementVNode(\"span\", { class: \"label\" }, \"信任度:\", -1 /* CACHED */)),\n                    _createElementVNode(\"span\", _hoisted_9, _toDisplayString(_unref(data).信任度), 1 /* TEXT */)\n                ]),\n                _createElementVNode(\"div\", _hoisted_10, [\n                    _cache[4] || (_cache[4] = _createElementVNode(\"span\", { class: \"label\" }, \"依赖度:\", -1 /* CACHED */)),\n                    _createElementVNode(\"span\", _hoisted_11, _toDisplayString(_unref(data).依赖度), 1 /* TEXT */)\n                ]),\n                _createElementVNode(\"div\", _hoisted_12, [\n                    _cache[5] || (_cache[5] = _createElementVNode(\"span\", { class: \"label\" }, \"饥饿:\", -1 /* CACHED */)),\n                    _createElementVNode(\"span\", _hoisted_13, _toDisplayString(_unref(data).状态.饥饿), 1 /* TEXT */)\n                ]),\n                _createElementVNode(\"div\", _hoisted_14, [\n                    _cache[6] || (_cache[6] = _createElementVNode(\"span\", { class: \"label\" }, \"疲劳:\", -1 /* CACHED */)),\n                    _createElementVNode(\"span\", _hoisted_15, _toDisplayString(_unref(data).状态.疲劳), 1 /* TEXT */)\n                ]),\n                _createElementVNode(\"div\", _hoisted_16, [\n                    _cache[7] || (_cache[7] = _createElementVNode(\"span\", { class: \"label\" }, \"快乐:\", -1 /* CACHED */)),\n                    _createElementVNode(\"span\", _hoisted_17, _toDisplayString(_unref(data).状态.快乐), 1 /* TEXT */)\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./App.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./App.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=134c42c0&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-134c42c0\"]])\n\nexport default __exports__","import App from './App.vue';\nimport './global.css';\n$(async () => {\n    await waitGlobalInitialized('Mvu');\n    createApp(App).use(createPinia()).mount('#app');\n});\n"],"names":["exports","sfc","props","target","__vccOpts","key","val","__webpack_module_cache__","Vue","z","Schema","object","coerce","number","transform","value","_","clamp","enum","default","record","string","describe","prefault","array","Number","MAX_SAFE_INTEGER","useDataStore","errorCatched","message_id","getCurrentMessageId","data","ref","parse","get","getVariables","type","new_data","parsed","isEqual","updateVariablesWith","variables","set","deep","debounce","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","__name","setup","__props","_ctx","_cache","__webpack_require__","moduleId","cachedModule","undefined","module","__webpack_modules__","$","async","waitGlobalInitialized","createApp","App","use","mount"],"ignoreList":[],"sourceRoot":""}