{"version":3,"file":"index.js","mappings":"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","sources":["src://tavern_helper_template/node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/exportHelper.js","src://tavern_helper_template/webpack/bootstrap","src://tavern_helper_template/external var \"Vue\"","src://tavern_helper_template/external var \"z\"","src://tavern_helper_template/src/Kinako/schema.ts","src://tavern_helper_template/src/Kinako/界面/store.ts","webpack://tavern_helper_template/./src/Kinako/界面/状态栏/App.vue?db5d","webpack://tavern_helper_template/src/Kinako/界面/状态栏/App.vue?ef3d","src://tavern_helper_template/src/Kinako/界面/状态栏/index.ts"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const __WEBPACK_NAMESPACE_OBJECT__ = Vue;","const __WEBPACK_NAMESPACE_OBJECT__ = z;","export const Schema = z.object({\n    affection: z.coerce.number().transform(value => _.clamp(value, 0, 100)),\n    mood: z.enum(['happy', 'angry', 'sad', 'excited', 'bored']).default('happy'),\n    energy: z.coerce.number().transform(value => _.clamp(value, 0, 100)),\n    trust: z.coerce.number().transform(value => _.clamp(value, 0, 100)),\n    dependency: z.coerce.number().transform(value => _.clamp(value, 0, 100)),\n    inventory: z\n        .record(z.string().describe('item name'), z.object({\n        description: z.string(),\n        quantity: z.coerce.number().transform(value => _.clamp(value, 0, 100)),\n    }))\n        .prefault({}),\n    titles: z.array(z.string()).prefault([]),\n    status: z\n        .object({\n        hunger: z.coerce.number().transform(value => _.clamp(value, 0, 100)),\n        fatigue: z.coerce.number().transform(value => _.clamp(value, 0, 100)),\n        happiness: z.coerce.number().transform(value => _.clamp(value, 0, 100)),\n    })\n        .prefault({}),\n    memory: z\n        .array(z.object({\n        event: z.string(),\n        timestamp: z.coerce.number().transform(value => _.clamp(value, 0, Number.MAX_SAFE_INTEGER)),\n    }))\n        .prefault([]),\n});\n","import { Schema } from '../schema';\nexport const useDataStore = defineStore('data', errorCatched(() => {\n    const message_id = getCurrentMessageId();\n    const data = ref(Schema.parse(_.get(getVariables({ type: 'message', message_id }), 'stat_data', {})));\n    watchDebounced(data, new_data => {\n        const parsed = Schema.parse(new_data);\n        if (!_.isEqual(parsed, new_data)) {\n            data.value = parsed;\n        }\n        updateVariablesWith(variables => {\n            _.set(variables, 'stat_data', parsed);\n            return variables;\n        }, { type: 'message', message_id });\n    }, { deep: true, debounce: 500 });\n    return { data };\n}));\n","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, unref as _unref, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = { class: \"kinako-status-bar\" };\nconst _hoisted_2 = { class: \"status-item\" };\nconst _hoisted_3 = { class: \"value\" };\nconst _hoisted_4 = { class: \"status-item\" };\nconst _hoisted_5 = { class: \"value\" };\nconst _hoisted_6 = { class: \"status-item\" };\nconst _hoisted_7 = { class: \"value\" };\nconst _hoisted_8 = { class: \"status-item\" };\nconst _hoisted_9 = { class: \"value\" };\nconst _hoisted_10 = { class: \"status-item\" };\nconst _hoisted_11 = { class: \"value\" };\nconst _hoisted_12 = { class: \"status-item\" };\nconst _hoisted_13 = { class: \"value\" };\nconst _hoisted_14 = { class: \"status-item\" };\nconst _hoisted_15 = { class: \"value\" };\nconst _hoisted_16 = { class: \"status-item\" };\nconst _hoisted_17 = { class: \"value\" };\nimport { useDataStore } from '../store';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'App',\n    setup(__props) {\n        const { data } = useDataStore();\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _cache[0] || (_cache[0] = _createElementVNode(\"span\", { class: \"label\" }, \"Affection:\", -1 /* CACHED */)),\n                    _createElementVNode(\"span\", _hoisted_3, _toDisplayString(_unref(data).affection), 1 /* TEXT */)\n                ]),\n                _createElementVNode(\"div\", _hoisted_4, [\n                    _cache[1] || (_cache[1] = _createElementVNode(\"span\", { class: \"label\" }, \"Mood:\", -1 /* CACHED */)),\n                    _createElementVNode(\"span\", _hoisted_5, _toDisplayString(_unref(data).mood), 1 /* TEXT */)\n                ]),\n                _createElementVNode(\"div\", _hoisted_6, [\n                    _cache[2] || (_cache[2] = _createElementVNode(\"span\", { class: \"label\" }, \"Energy:\", -1 /* CACHED */)),\n                    _createElementVNode(\"span\", _hoisted_7, _toDisplayString(_unref(data).energy), 1 /* TEXT */)\n                ]),\n                _createElementVNode(\"div\", _hoisted_8, [\n                    _cache[3] || (_cache[3] = _createElementVNode(\"span\", { class: \"label\" }, \"Trust:\", -1 /* CACHED */)),\n                    _createElementVNode(\"span\", _hoisted_9, _toDisplayString(_unref(data).trust), 1 /* TEXT */)\n                ]),\n                _createElementVNode(\"div\", _hoisted_10, [\n                    _cache[4] || (_cache[4] = _createElementVNode(\"span\", { class: \"label\" }, \"Dependency:\", -1 /* CACHED */)),\n                    _createElementVNode(\"span\", _hoisted_11, _toDisplayString(_unref(data).dependency), 1 /* TEXT */)\n                ]),\n                _createElementVNode(\"div\", _hoisted_12, [\n                    _cache[5] || (_cache[5] = _createElementVNode(\"span\", { class: \"label\" }, \"Hunger:\", -1 /* CACHED */)),\n                    _createElementVNode(\"span\", _hoisted_13, _toDisplayString(_unref(data).status.hunger), 1 /* TEXT */)\n                ]),\n                _createElementVNode(\"div\", _hoisted_14, [\n                    _cache[6] || (_cache[6] = _createElementVNode(\"span\", { class: \"label\" }, \"Fatigue:\", -1 /* CACHED */)),\n                    _createElementVNode(\"span\", _hoisted_15, _toDisplayString(_unref(data).status.fatigue), 1 /* TEXT */)\n                ]),\n                _createElementVNode(\"div\", _hoisted_16, [\n                    _cache[7] || (_cache[7] = _createElementVNode(\"span\", { class: \"label\" }, \"Happiness:\", -1 /* CACHED */)),\n                    _createElementVNode(\"span\", _hoisted_17, _toDisplayString(_unref(data).status.happiness), 1 /* TEXT */)\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./App.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./App.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=811511e6&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-811511e6\"]])\n\nexport default __exports__","import App from './App.vue';\nimport './global.css';\n$(async () => {\n    await waitGlobalInitialized('Mvu');\n    createApp(App).use(createPinia()).mount('#app');\n});\n"],"names":["exports","sfc","props","target","__vccOpts","key","val","__webpack_module_cache__","Vue","z","Schema","object","affection","coerce","number","transform","value","_","clamp","mood","enum","default","energy","trust","dependency","inventory","record","string","describe","description","quantity","prefault","titles","array","status","hunger","fatigue","happiness","memory","event","timestamp","Number","MAX_SAFE_INTEGER","useDataStore","errorCatched","message_id","getCurrentMessageId","data","ref","parse","get","getVariables","type","new_data","parsed","isEqual","updateVariablesWith","variables","set","deep","debounce","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","__name","setup","__props","_ctx","_cache","__webpack_require__","moduleId","cachedModule","undefined","module","__webpack_modules__","$","async","waitGlobalInitialized","createApp","App","use","mount"],"ignoreList":[],"sourceRoot":""}